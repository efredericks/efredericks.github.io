<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/assets/styles/styles.css">
<link rel="stylesheet" href="https://indestructibletype.com/fonts/Jost.css" type="text/css" charset="utf-8" />
<script src="https://kit.fontawesome.com/79c31398dc.js" crossorigin="anonymous"></script>

<!-- favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png">
<link rel="manifest" href="/assets/img/site.webmanifest">
<link rel="mask-icon" href="/assets/img/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/img/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- feed -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="erik fredericks" />




<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Computing Club Tutorial - Entity Component System (ECS) | erik fredericks</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Computing Club Tutorial - Entity Component System (ECS)" />
<meta name="author" content="efredericks" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="tutorial on ECS in p5js" />
<meta property="og:description" content="tutorial on ECS in p5js" />
<meta property="twitter:description" content="tutorial on ECS in p5js" />
<link rel="canonical" href="http://localhost:4000/cclub-ecs.html" />
<meta property="og:url" content="http://localhost:4000/cclub-ecs.html" />
<meta property="og:site_name" content="erik fredericks" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-09-21T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Computing Club Tutorial - Entity Component System (ECS)" />
<meta name="twitter:site" content="@efredericks" />
<meta name="twitter:creator" content="@efredericks" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"efredericks"},"dateModified":"2025-09-21T00:00:00-04:00","datePublished":"2025-09-21T00:00:00-04:00","description":"tutorial on ECS in p5js","headline":"Computing Club Tutorial - Entity Component System (ECS)","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/cclub-ecs.html"},"url":"http://localhost:4000/cclub-ecs.html"}</script>
<!-- End Jekyll SEO tag -->


  </head>
  <body>
    <aside class="menu">
    <div class="menu-top">
        <div class="menu-top_logo">
            <a href="/">
                <img src="/assets/img/Fredericks-Small.jpg" alt="Logo" onerror="this.style.display='none'">
            </a>
        </div>
        <div class="menu-top_expand" onclick="toggleExpander(this)">
            <div class="bar_top"></div>
            <div class="bar_middle"></div>
            <div class="bar_bottom"></div>
        </div>
        <ul class="navigation">
            
            <li>
                <a href="/" category="home" title="">
                    <span>home</span>
                </a>
            </li>
            
            <li>
                <a href="/students.html" category="students" title="students tooltip">
                    <span>students</span>
                </a>
            </li>
            
            <li>
                <a href="/teaching.html" category="teaching" title="teaching tooltip">
                    <span>teaching</span>
                </a>
            </li>
            
            <li>
                <a href="/publications.html" category="publications" title="publications tooltip">
                    <span>publications</span>
                </a>
            </li>
            
            <li>
                <a href="/activities.html" category="activities" title="activities tooltip">
                    <span>activities</span>
                </a>
            </li>
            
            <li>
                <a href="/posts/" category="" title="" class="selected">
                    <span>posts</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="menu-contact">
        

        <a href="https://github.com/efredericks" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-github"></i>
        </a>
        

        <a href="https://scholar.google.com/citations?user=wpdiGa0AAAAJ" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-toilet-paper"></i>
        </a>
        

        <a href="https://youtube.com/@erikfredericks" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-youtube-play"></i>
        </a>
        

        <a href="https://twitch.tv/mrdoktorprofessor" target="_blank" rel="noopener noreferrer">
            <i class="fa fa-twitch"></i>
        </a>
        

        <a href="https://twitter.com/erik_fredericks" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-twitter"></i>
        </a>
        

        <a href="mailto:frederer@gvsu.edu" target="">
            <i class="fas fa-envelope"></i>
        </a>
        
    </div>
</aside>

      <main class="content-layout">
          <div class="post">
    <div class="content-container ">

        <header>
            <h1>Computing Club Tutorial - Entity Component System (ECS)</h1>
            
        </header>
        <div class="post-content">
            <hr>

<ul>
  <li><a href="tbd">functioning p5js sketch</a></li>
  <li><a href="tbd">GitHub repository</a></li>
</ul>

<hr>

<p><strong>Table of Contents</strong></p>

<ul id="markdown-toc">
  <li><a href="#what-is-ecs" id="markdown-toc-what-is-ecs">What is ECS?</a></li>
  <li><a href="#a-note-on-resources" id="markdown-toc-a-note-on-resources">A note on resources</a></li>
  <li><a href="#setup" id="markdown-toc-setup">Setup</a></li>
  <li>
<a href="#first-steps" id="markdown-toc-first-steps">First steps</a>    <ul>
      <li><a href="#1-create-a-new-project-directory-structure" id="markdown-toc-1-create-a-new-project-directory-structure">1. Create a new project (directory structure)</a></li>
      <li><a href="#2-upload-your-asset-files-and-create-empty-files" id="markdown-toc-2-upload-your-asset-files-and-create-empty-files">2. Upload your asset files and create empty files</a></li>
      <li><a href="#3-wire-everything-up" id="markdown-toc-3-wire-everything-up">3. Wire everything up</a></li>
      <li><a href="#4-use-p5js-20x" id="markdown-toc-4-use-p5js-20x">4. Use p5js 2.0.x</a></li>
      <li><a href="#5-draw-your-character-to-the-screen" id="markdown-toc-5-draw-your-character-to-the-screen">5. Draw your character to the screen</a></li>
      <li><a href="#6-move-them-around" id="markdown-toc-6-move-them-around">6. Move them around</a></li>
    </ul>
  </li>
  <li><a href="#entities" id="markdown-toc-entities">Entities</a></li>
  <li><a href="#components" id="markdown-toc-components">Components</a></li>
  <li><a href="#handling-a-map" id="markdown-toc-handling-a-map">Handling a map</a></li>
  <li><a href="#camera-follow" id="markdown-toc-camera-follow">Camera follow</a></li>
  <li><a href="#next-steps" id="markdown-toc-next-steps">Next steps</a></li>
</ul>

<hr>

<!-- # ECS Tutorial overview -->

<p>We’re going to be creating a 2D, top-down, tile-based game demo using p5js.</p>

<h2 id="what-is-ecs">What is ECS?</h2>

<p>The Entity-Component-System (ECS) design pattern is a lovely pattern for managing a lot of disparate types of things in your game.  Specifically, you might want to define characters that move, characters that don’t move, items, items that hurt you, items that talk to you, NPCs, enemies of varying type, etc.</p>

<p>The nice thing is that those all typically derive from the same base class.  They all need a position and a sprite, for example.  Essentially, we’ll define an <code class="language-plaintext highlighter-rouge">Entity</code> class and inherit from that for all our varying types.</p>

<p>We may also want to give them different abilities/characteristics.  Enter <em>components</em> – the tl;dr is that you will “equip” an entity with a certain component, and that entity will then check its list of components for its abilities.</p>

<p>This is a fairly reductive take on ECS and you can read about it in-depth on <a href="https://en.wikipedia.org/wiki/Entity_component_system" target="_blank" rel="noopener noreferrer">Wikipedia</a> and <a href="https://dev.to/kspeakman/entity-component-system-an-old-new-thing-3224" target="_blank" rel="noopener noreferrer">dev.to</a> and <a href="https://www.richardlord.net/blog/ecs/why-use-an-entity-framework.html" target="_blank" rel="noopener noreferrer">this blog</a>.</p>

<p>There also is an ECS framework available as well: <a href="https://www.flecs.dev/flecs/" target="_blank" rel="noopener noreferrer">FLECS</a> and a correlated <a href="https://github.com/SanderMertens/ecs-faq" target="_blank" rel="noopener noreferrer">FAQ</a>.</p>

<h2 id="a-note-on-resources">A note on resources</h2>

<p>Until you’re ready to hire an artist, use royalty/copyright-free resources.  There are a <strong>lot</strong> available online, from <a href="https://itch.io/search?q=assets" target="_blank" rel="noopener noreferrer">itch.io</a> to <a href="https://opengameart.org/" target="_blank" rel="noopener noreferrer">opengameart</a> to (my favorite) <a href="https://kenney.nl" target="_blank" rel="noopener noreferrer">kenney.nl</a>.</p>

<p>Whatever you do though:</p>

<ol>
  <li>Avoid using copyrighted images (unless if you paid for it)</li>
  <li>Include the license <strong>every time</strong> you use a resource, and check the attribution requirements for the original file</li>
  <li>Avoid using AI-generated artwork - hire an artist</li>
  <li>Since we’re using p5js you’ll want to become familiar with their documentation.  There are a large number of resources, tutorials, libraries, and <strong>well-written</strong> API documentation pages on their site: <a href="https://p5js.org/reference/" target="_blank" rel="noopener noreferrer">https://p5js.org/reference/</a>.</li>
</ol>

<h2 id="setup">Setup</h2>

<ol>
  <li>Create an account on the p5js editor: <a href="p5js%20online%20editor">https://editor.p5js.org</a> - I’ve linked my GitHub to it for ease of sign in, however you can use whatever method you prefer.</li>
  <li>Grab a spritesheet from <a href="https://kenney.nl" target="_blank" rel="noopener noreferrer">kenney.nl</a>: I’ll be using the <a href="https://kenney.nl/assets/micro-roguelike" target="_blank" rel="noopener noreferrer">microrogue resource</a>. Make sure you include the License when you upload!
    <ul>
      <li>Double-note - we’re using the “packed” sprite sheet, not individual images!  Both have pros and cons, however uploading hundreds of images to the online editor doesn’t work very well.  The non-packed sheet adds a gutter in between images - great for slicing up in something like Tiled or Godot but not as easy to use when calculating based on pixel size (though, to be fair it would just be an offset – we’ll get there).</li>
    </ul>
  </li>
</ol>

<h2 id="first-steps">First steps</h2>

<p>Ok, here we go!  Everything we’ll be doing is in the online p5js editor, however you can export it to any website you want after we’re done.</p>

<h3 id="1-create-a-new-project-directory-structure">1. Create a new project (directory structure)</h3>

<p>Let’s start by defining a directory structure.  By default you’ll have some p5 libraries, an <code class="language-plaintext highlighter-rouge">index.html</code>, and a <code class="language-plaintext highlighter-rouge">sketch.js</code>.</p>

<p>If you aren’t familiar:</p>

<ul>
  <li>Any time we add a new <code class="language-plaintext highlighter-rouge">js</code> file we need to link to it within the <code class="language-plaintext highlighter-rouge">index.html</code> file - <strong>before</strong> we include the <code class="language-plaintext highlighter-rouge">sketch.js</code> file.  HTML/JavaScript is (typically) rendered <strong>in-order</strong>, so dependencies must be specified in the correct order.</li>
  <li>p5js uses a few functions to set things up:
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">setup</code> runs before the <code class="language-plaintext highlighter-rouge">draw</code> cycle (or, the forever loop).  Set variable states and do all of your setup in this function.  With p5js 2.0 and beyond, all file loading happens in <code class="language-plaintext highlighter-rouge">setup</code> as well!</li>
      <li>
<code class="language-plaintext highlighter-rouge">draw</code> is your forever loop - it runs either as fast as possible or at a specified frame rate.</li>
    </ul>
  </li>
</ul>

<h3 id="2-upload-your-asset-files-and-create-empty-files">2. Upload your asset files and create empty files</h3>

<p>Create a directory on the side called assets and upload your spritesheet <strong>and</strong> its license file.  While you’re working there, create files named <code class="language-plaintext highlighter-rouge">components.js</code> and <code class="language-plaintext highlighter-rouge">entities.js</code> at the root of your directory (we could add sub-folders for organization, but for this we’ll just keep it on the same level).</p>

<p><img src="/assets/img/ecs-js/uploading.png" alt="uploading"></p>

<p>Note - if you want to upload to a folder then you need to hover over it and click the little dropdown triangle to the side, otherwise you upload to the root of the structure.</p>

<p><img src="/assets/img/ecs-js/uploading2.png" alt="uploading to folder"></p>

<h3 id="3-wire-everything-up">3. Wire everything up</h3>

<p>In your <code class="language-plaintext highlighter-rouge">index.html</code> file, add the following lines <em>above</em> the call to include <code class="language-plaintext highlighter-rouge">sketch.js</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="dl">"</span><span class="s2">components.js</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="dl">"</span><span class="s2">entities.js</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="dl">"</span><span class="s2">sketch.js</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<p>We need to put them above as they need to be parsed before <code class="language-plaintext highlighter-rouge">sketch.js</code> is parsed (for instance, any global variables we might want to share).</p>

<blockquote>
  <p>Note that we are setting up a structure that is good for a quick demo - it would be much better to refactor our code to say, have a <code class="language-plaintext highlighter-rouge">Game</code> class controlling everything, ingesting the assets, managing entities, etc.  However, we’re going to just use a few global variables to get things working.</p>
</blockquote>

<h3 id="4-use-p5js-20x">4. Use p5js 2.0.x</h3>

<p>Let’s start you off with the latest version of p5js - click the version number (next to the gear icon) in the top right and select the latest 2.0.x version - I’m on 2.0.5.  This introduces a plethora of new features - the ones I’m most familiar with are that assets are now loaded in via <code class="language-plaintext highlighter-rouge">async</code>/<code class="language-plaintext highlighter-rouge">await</code> calls (instead of using a <code class="language-plaintext highlighter-rouge">preload</code> function).  Let’s try it out:</p>

<p>At the top of your <code class="language-plaintext highlighter-rouge">sketch.js</code> file (in global space), add a variable:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">spritesheet</span><span class="p">;</span>

<span class="p">...</span>

<span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>
</code></pre></div></div>

<p>And then modify your <code class="language-plaintext highlighter-rouge">setup</code> and <code class="language-plaintext highlighter-rouge">draw</code> functions to look like this:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// load in sprite sheet - change the filename to match your file</span>
  <span class="k">await</span> <span class="nx">loadImage</span><span class="p">(</span><span class="dl">"</span><span class="s2">assets/spritesheet.png</span><span class="dl">"</span><span class="p">);</span> 
  <span class="nx">createCanvas</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">background</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="nx">image</span><span class="p">(</span><span class="nx">spritesheet</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You should now see your spritesheet being drawn to the top left corner!  Note that we also draw the background to give the illusion of animation (once things start to move).  If you didn’t redraw the background then things would smear the screen.</p>

<p><img src="/assets/img/ecs-js/spritesheet-draw.png" alt="spritesheet"></p>

<h3 id="5-draw-your-character-to-the-screen">5. Draw your character to the screen</h3>

<p>In the global space create an object for a character - eventually we’ll replace it with a class, however for now it’ll just keep an eye on the location:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">spritesheet</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">player</span><span class="p">;</span>

<span class="p">...</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="nx">player</span> <span class="o">=</span> <span class="p">{</span><span class="na">x</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="mi">20</span><span class="p">};</span>

  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This gives our player a position in 2D space - note that the origin is at the top left corner (and all images/rectanges are drawn with their respective top left corners as the origin).</p>

<blockquote>
  <p>You can test this out by the way, when drawing the spritesheet you can use the player position:</p>

  <p><code class="language-plaintext highlighter-rouge">draw(spritesheet, player.x, player.y);</code></p>
</blockquote>

<p>However, we want to draw a single sprite from our spritesheet, not the entirety of it.</p>

<blockquote>
  <p>There are different approaches to loading sprites - we’re doing it the ‘low-impact’ way where we only load in a single image, rather than hundreds.  This has the benefit of saving memory (1 image vs. hundreds) at the cost of a slight bit of complexity.</p>
</blockquote>

<p>We need to add a helper function and some information to draw a single sprite.  What we will do is add a variable to tell us the width and height of a sprite (they <em>should</em> all be the same size in your spritesheets - some of the more complicated ones use varying sizes and that can be a pain to manually calculate).</p>

<p>Note - if you’re using a different spritesheet, check the documentation inside for how large a sprite is.</p>

<p>At the top of <code class="language-plaintext highlighter-rouge">sketch.js</code> add the following (using your sprite size):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">SPRITE_SIZE</span>  <span class="o">=</span> <span class="mi">8</span><span class="p">;</span> <span class="c1">// size of sprite in spritesheet</span>
<span class="kd">const</span> <span class="nx">SPRITE_SCALE</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// amount to scale base sprite</span>
<span class="kd">let</span> <span class="nx">SPRITE_SCALED</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// calculated scale value</span>
</code></pre></div></div>

<p>What going to do is use the <code class="language-plaintext highlighter-rouge">SPRITE_SIZE</code> variable to calculate where in the sprite sheet our desired image is located, and then scale it up when drawing so it isn’t tiny.</p>

<p>Inside <code class="language-plaintext highlighter-rouge">setup()</code> make sure you calculate SPRITE_SCALED:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">...</span>

  <span class="nx">SPRITE_SCALED</span> <span class="o">=</span> <span class="nx">SPRITE_SCALE</span> <span class="o">*</span> <span class="nx">SPRITE_SIZE</span><span class="p">;</span>

  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Add the following to the bottom of your <code class="language-plaintext highlighter-rouge">sketch.js</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// utility function for drawing a single sprite from the spritesheet </span>
<span class="c1">// note: assumes using the 'packed' version (no spaces/gutters)</span>
<span class="kd">function</span> <span class="nx">drawSprite</span><span class="p">(</span><span class="nx">sprite_id</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">image</span><span class="p">(</span>
    <span class="nx">spritesheet</span><span class="p">,</span>   <span class="c1">// spritesheet object</span>
    <span class="nx">x</span><span class="p">,</span>             <span class="c1">// x location to draw on screen</span>
    <span class="nx">y</span><span class="p">,</span>             <span class="c1">// y location to draw on screen</span>
    <span class="nx">sprite_scaled</span><span class="p">,</span> <span class="c1">// the **new** width of the sprite</span>
    <span class="nx">sprite_scaled</span><span class="p">,</span> <span class="c1">// the **new** height of the sprite</span>
    <span class="nx">sprite_dict</span><span class="p">[</span><span class="nx">sprite_id</span><span class="p">].</span><span class="nx">c</span> <span class="o">*</span> <span class="nx">SPRITE_SIZE</span><span class="p">,</span> <span class="c1">// its x location in the spritesheet</span>
    <span class="nx">sprite_dict</span><span class="p">[</span><span class="nx">sprite_id</span><span class="p">].</span><span class="nx">r</span> <span class="o">*</span> <span class="nx">SPRITE_SIZE</span><span class="p">,</span> <span class="c1">// its y location in the spritesheet</span>
    <span class="nx">SPRITE_SIZE</span><span class="p">,</span>   <span class="c1">// the **original** width of the sprite</span>
    <span class="nx">SPRITE_SIZE</span>    <span class="c1">// the **original** height of the sprite</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This uses the extended syntax of the <code class="language-plaintext highlighter-rouge">image()</code> function (see <a href="https://p5js.org/reference/p5/image/" target="_blank" rel="noopener noreferrer">https://p5js.org/reference/p5/image/</a>), however to explain what is going on:</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">image(img, dx, dy, dWidth, dHeight, sx, sy, [sWidth], [sHeight], [fit], [xAlign], [yAlign])</code></p>
</blockquote>

<p><img src="https://p5js.org/assets/drawImage.png" alt="image drawing"></p>

<p>HOWEVER, we have an undefined variable!  We need to create a lookup table so that we define which <strong>row</strong> and <strong>column</strong> a specific sprite is!</p>

<p>At the top:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">sprite_dict</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">player</span><span class="p">:</span>   <span class="p">{</span> <span class="na">r</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="mi">4</span> <span class="p">},</span>
  <span class="na">npc</span><span class="p">:</span>      <span class="p">{</span> <span class="na">r</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="mi">5</span> <span class="p">},</span>
  <span class="na">beholder</span><span class="p">:</span> <span class="p">{</span> <span class="na">r</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="mi">13</span> <span class="p">},</span>
  <span class="na">snake</span><span class="p">:</span>    <span class="p">{</span> <span class="na">r</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="mi">4</span> <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<p>This defines a dictionary for every single character in our game.  Some spritesheets come with a <code class="language-plaintext highlighter-rouge">json</code> file for easy unpacking, however these ones don’t.  Gives you a bit more control!</p>

<blockquote>
  <p>Feel free to pick whatever sprites you want for the various characters we’ll be drawing.</p>
</blockquote>

<hr>

<p>You may have noticed things don’t look … great.  That’s because we’re scaling a small image up and its edges are supposed to be nice and crisp.</p>

<p><img src="/assets/img/ecs-js/smoothed.png" alt="smoothed"></p>

<p>Last but not least, we need to direct the canvas to be optimized for pixel art.  If you look at the p5js documentation there are <code class="language-plaintext highlighter-rouge">smooth()</code> and <code class="language-plaintext highlighter-rouge">noSmooth()</code> functions, however they don’t seem to have the desired effect (note: I don’t know why).</p>

<p>After your call to <code class="language-plaintext highlighter-rouge">createCanvas(400, 400)</code> add the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// load in sprite sheet - change the filename to match your file</span>
  <span class="k">await</span> <span class="nx">loadImage</span><span class="p">(</span><span class="dl">"</span><span class="s2">assets/spritesheet.png</span><span class="dl">"</span><span class="p">);</span> 
  <span class="nx">createCanvas</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>

  <span class="nx">drawingContext</span><span class="p">.</span><span class="nx">imageSmoothingEnabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="p">...</span>

<span class="p">}</span>
</code></pre></div></div>

<p>The image should be a bit crisper now.</p>

<p><img src="/assets/img/ecs-js/nosmoothed.png/" alt="nosmooth"></p>

<h3 id="6-move-them-around">6. Move them around</h3>

<p>We have the ability to draw sprites and they should look crisp.  Let’s now move our player around the screen.</p>

<p>Before we get into it, you might notice your background doesn’t match mine.  That’s because I told you to use 0 (black), however the sprite background is somewhat gray (if you’re using the microroguelike one).</p>

<p>What you need to do is figure out what the color of your sprite background is and set the color each draw cycle to that!  (If the sprites have a transparent background you don’t need to worry about this - and in the olden days we used to filter based on a magic color: <span style="background:#ff00ff">#ff00ff</span>).</p>

<p>For me, it is <span style="background:#222323;color:#eee;">#222323</span>, so at the top:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">sprite_bg</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">#222323</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div></div>

<p>and then in <code class="language-plaintext highlighter-rouge">draw</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">background</span><span class="p">(</span><span class="nx">sprite_bg</span><span class="p">);</span>

  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Ok, fun time - p5js handles keypresses in an interesting fashion.  You can use the <code class="language-plaintext highlighter-rouge">keyPressed</code> function, the <code class="language-plaintext highlighter-rouge">isKeyPressed</code> function (within <code class="language-plaintext highlighter-rouge">draw</code>), and so on.  Since we’re going for a game where the user can hold down keys, we’ll use the <code class="language-plaintext highlighter-rouge">isKeyPressed</code> approach.</p>

<p>At the bottom of <code class="language-plaintext highlighter-rouge">draw</code> (i.e., let’s handle player input after updating/drawing the game state):</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>

  <span class="p">...</span>

  <span class="c1">// enable continuous movement</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">keyIsDown</span><span class="p">(</span><span class="nx">LEFT_ARROW</span><span class="p">)</span> <span class="o">||</span> <span class="nx">keyIsDown</span><span class="p">(</span><span class="dl">"</span><span class="s2">a</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">x</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">keyIsDown</span><span class="p">(</span><span class="nx">RIGHT_ARROW</span><span class="p">)</span> <span class="o">||</span> <span class="nx">keyIsDown</span><span class="p">(</span><span class="dl">"</span><span class="s2">d</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">x</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">keyIsDown</span><span class="p">(</span><span class="nx">UP_ARROW</span><span class="p">)</span> <span class="o">||</span> <span class="nx">keyIsDown</span><span class="p">(</span><span class="dl">"</span><span class="s2">w</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">y</span><span class="o">--</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">keyIsDown</span><span class="p">(</span><span class="nx">DOWN_ARROW</span><span class="p">)</span> <span class="o">||</span> <span class="nx">keyIsDown</span><span class="p">(</span><span class="dl">"</span><span class="s2">s</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">player</span><span class="p">.</span><span class="nx">y</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here we’re using the arrow or WADS keys for movement.  You can define whichever keys you want to use (or gamepads, for instance).</p>

<blockquote>
  <p>Note: again, there are nicer ways of doing this.  Defining a lookup table of keys, for example, so that you can easily have your users configure their controls…</p>
</blockquote>

<p>Your player should now move around the screen, a little bit at a time.  You can play with the increment/decrement values to make it faster, however we’ll bake that into our Entity later on.</p>

<blockquote>
  <p>Note: at this point, you can define any number of sprites on the screen - for example:</p>

  <p><code class="language-plaintext highlighter-rouge">drawSprite('snake', 100, 100);</code></p>
</blockquote>

<hr>

<p><a href="s1%20branch">GitHub Repository - Step 1</a></p>

<hr>

<h2 id="entities">Entities</h2>

<p>A lot of stuff to get things drawn!  Fortunately, that was a lot of the heavy lifting!  Let’s now make our player a bit more useful and turn it into an <code class="language-plaintext highlighter-rouge">Entity</code> - by doing so we can <strong>easily</strong> abstract out every single other entity in our game.</p>

<blockquote>
  <p>Note: the overall goal is to end up with an array of entities that we can loop over and simply call their respective <code class="language-plaintext highlighter-rouge">update()</code> and <code class="language-plaintext highlighter-rouge">draw()</code> functions - no spaghetti mess of if statements!  If you’ve a software engineering background then you might be familiar with the concept of having classes responsible for themselves.  Essentially, we’re looking to partition out effort and responsibility.</p>
</blockquote>

<p>First, we’ll create a <strong>base entity class</strong>.  Move over to <code class="language-plaintext highlighter-rouge">entities.js</code> and add the following:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Entity</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">sprite</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sprite</span> <span class="o">=</span> <span class="nx">sprite</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="nx">createVector</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">createVector</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">update</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">draw</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">drawImage</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">sprite</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This gives us a <em>base class</em> that we can extend others off of.  It’ll have a sprite variable, a position, and a size.  You’ll note we’re using <code class="language-plaintext highlighter-rouge">createVector</code> to store the x/y and w/h of the object.  This is because later on we’ll be using some vector math and it is easier to manage now rather than creating temporary variables (plus, it’s a bit cleaner).</p>

<p>create a base entity class with empty functions (use vector instead of x,y)
create a moveable entity class
show update/draw
create a player and enemy class
create the array and add the player and enemies
create dvd and follower</p>

<h2 id="components">Components</h2>

<p>remove custom entities for AI and replace with components</p>

<h2 id="handling-a-map">Handling a map</h2>

<p>generate a map</p>

<h2 id="camera-follow">Camera follow</h2>

<p>.. tbd</p>

<h2 id="next-steps">Next steps</h2>

<p>This is a taste of what you can do.  A few things:</p>

<ul>
  <li>p5js is canonically <em>slow</em> for JavaScript games as it makes some choices in terms of rendering performance.  It is for teaching and not necessarily production games.  Manually draw to the <code class="language-plaintext highlighter-rouge">canvas</code> with straight JavaScript or use a framework like <a href="https://phaser.io" target="_blank" rel="noopener noreferrer">PhaserJS</a> to optimize your game.
    <ul>
      <li>Check the Performance tab in your browser to profile!  Also, <a href="https://github.com/processing/p5.js/wiki/Optimizing-p5.js-Code-for-Performance#identifying-slow-code-profiling" target="_blank" rel="noopener noreferrer">p5 optimization suggestions</a>
</li>
    </ul>
  </li>
  <li>
    <p>Add gameplay!  We’ve essentially created a 2D walking simulator.</p>
  </li>
  <li>
    <p>Wire in Tiled maps!  I’ve not tried it, but a lot of 2D games use the <a href="https://www.mapeditor.org/" target="_blank" rel="noopener noreferrer">Tiled Editor</a> for setting up maps, obstacles, etc. <a href="https://github.com/linux-man/p5.tiledmap" target="_blank" rel="noopener noreferrer">p5.tiledmap</a></p>
  </li>
  <li>Check out the other <a href="https://p5js.org/libraries/" target="_blank" rel="noopener noreferrer">p5js libraries</a>! There are a <strong>ton</strong> of things you can do with it!
    <ul>
      <li>There is an <a href="https://github.com/RandomGamingDev/BasicECSJs/" target="_blank" rel="noopener noreferrer">ECS library</a> as well that I’ve never tried, but it also includes a Scene Manager, which is nice (alternatively, just use a state machine to manage that yourself).</li>
    </ul>
  </li>
  <li>Make a roguelike game in Godot!  The <a href="https://selinadev.github.io/" target="_blank" rel="noopener noreferrer">SelinaDev tutorial</a> is a nice introduction to Godot (and more imporantly for this, ECS).</li>
</ul>

<p>camera + sprites
https://editor.p5js.org/efredericks/sketches/wErqg4bAf</p>

<div class="carousel__holder">
  <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>&lt;div id="carousel0" class="carousel"&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0a" checked="checked" /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0b"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0c"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0d"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0e"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0f"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0g"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0h"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0i"  /&gt;
    
      &lt;input class="carousel__activator" type="radio" name="carousel0" id="0j"  /&gt;
    
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0j"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0b"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0a"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0c"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0b"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0d"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0c"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0e"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0d"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0f"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0e"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0g"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0f"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0h"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0g"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0i"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0h"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0j"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
      
      
      
      
      &lt;div class="carousel__controls"&gt;
          &lt;label class="carousel__control carousel__control--backward" for="0i"&gt;&lt;/label&gt;
          &lt;label class="carousel__control carousel__control--forward" for="0a"&gt;&lt;/label&gt;
      &lt;/div&gt;
    
    &lt;div class="carousel__track"&gt;
      &lt;ul&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-6.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-6.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-6.png" title="/assets/img/GenerativeGI/random/img-6.png" alt="/assets/img/GenerativeGI/random/img-6.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-22.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-22.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-22.png" title="/assets/img/GenerativeGI/random/img-22.png" alt="/assets/img/GenerativeGI/random/img-22.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-46.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-46.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-46.png" title="/assets/img/GenerativeGI/random/img-46.png" alt="/assets/img/GenerativeGI/random/img-46.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-62.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-62.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-62.png" title="/assets/img/GenerativeGI/random/img-62.png" alt="/assets/img/GenerativeGI/random/img-62.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-64.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-64.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-64.png" title="/assets/img/GenerativeGI/random/img-64.png" alt="/assets/img/GenerativeGI/random/img-64.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-67.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-67.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-67.png" title="/assets/img/GenerativeGI/random/img-67.png" alt="/assets/img/GenerativeGI/random/img-67.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-71.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-71.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-71.png" title="/assets/img/GenerativeGI/random/img-71.png" alt="/assets/img/GenerativeGI/random/img-71.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-94.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-94.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-94.png" title="/assets/img/GenerativeGI/random/img-94.png" alt="/assets/img/GenerativeGI/random/img-94.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-94-1.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-94-1.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-94-1.png" title="/assets/img/GenerativeGI/random/img-94-1.png" alt="/assets/img/GenerativeGI/random/img-94-1.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
        &lt;li class="carousel__slide"&gt;
          &lt;!-- style="background-image: url('/assets/img/GenerativeGI/random/img-98.png');"&gt; --&gt;
          &lt;a href=" /assets/img/GenerativeGI/random/img-98.png "&gt;
            &lt;img src="/assets/img/GenerativeGI/random/img-98.png" title="/assets/img/GenerativeGI/random/img-98.png" alt="/assets/img/GenerativeGI/random/img-98.png" /&gt;
          &lt;/a&gt;
        &lt;/li&gt;
        
      &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div class="carousel__indicators"&gt;
        
          &lt;label class="carousel__indicator" for="0a"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0b"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0c"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0d"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0e"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0f"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0g"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0h"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0i"&gt;&lt;/label&gt;
        
          &lt;label class="carousel__indicator" for="0j"&gt;&lt;/label&gt;
        
    &lt;/div&gt;
&lt;/div&gt;
</code></pre></div>  </div>
</div>

<style>
.carousel__holder {width: 100%; position: relative; padding-bottom: 50%; margin: 1rem 0 1rem;}
.carousel {
  height: 100%;
  width: 100%;
  overflow: hidden;
  text-align: center;
  position: absolute;
  padding: 0;
}
.carousel__controls,
.carousel__activator {
  display: none;
}

.carousel__activator:nth-of-type(1):checked ~ .carousel__track {
  -webkit-transform: translateX(-000%);
          transform: translateX(-000%);
}
.carousel__activator:nth-of-type(1):checked ~ .carousel__slide:nth-of-type(1) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(1):checked ~ .carousel__controls:nth-of-type(1) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(1):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(1) {
  opacity: 1;
}

.carousel__activator:nth-of-type(2):checked ~ .carousel__track {
  -webkit-transform: translateX(-100%);
          transform: translateX(-100%);
}
.carousel__activator:nth-of-type(2):checked ~ .carousel__slide:nth-of-type(2) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(2):checked ~ .carousel__controls:nth-of-type(2) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(2):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(2) {
  opacity: 1;
}

.carousel__activator:nth-of-type(3):checked ~ .carousel__track {
  -webkit-transform: translateX(-200%);
          transform: translateX(-200%);
}
.carousel__activator:nth-of-type(3):checked ~ .carousel__slide:nth-of-type(3) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(3):checked ~ .carousel__controls:nth-of-type(3) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(3):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(3) {
  opacity: 1;
}

.carousel__activator:nth-of-type(4):checked ~ .carousel__track {
  -webkit-transform: translateX(-300%);
          transform: translateX(-300%);
}
.carousel__activator:nth-of-type(4):checked ~ .carousel__slide:nth-of-type(4) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(4):checked ~ .carousel__controls:nth-of-type(4) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(4):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(4) {
  opacity: 1;
}

.carousel__activator:nth-of-type(5):checked ~ .carousel__track {
  -webkit-transform: translateX(-400%);
          transform: translateX(-400%);
}
.carousel__activator:nth-of-type(5):checked ~ .carousel__slide:nth-of-type(5) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(5):checked ~ .carousel__controls:nth-of-type(5) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(5):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(5) {
  opacity: 1;
}

.carousel__activator:nth-of-type(6):checked ~ .carousel__track {
  -webkit-transform: translateX(-500%);
          transform: translateX(-500%);
}
.carousel__activator:nth-of-type(6):checked ~ .carousel__slide:nth-of-type(6) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(6):checked ~ .carousel__controls:nth-of-type(6) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(6):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(6) {
  opacity: 1;
}

.carousel__activator:nth-of-type(7):checked ~ .carousel__track {
  -webkit-transform: translateX(-600%);
          transform: translateX(-600%);
}
.carousel__activator:nth-of-type(7):checked ~ .carousel__slide:nth-of-type(7) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(7):checked ~ .carousel__controls:nth-of-type(7) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(7):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(7) {
  opacity: 1;
}

.carousel__activator:nth-of-type(8):checked ~ .carousel__track {
  -webkit-transform: translateX(-700%);
          transform: translateX(-700%);
}
.carousel__activator:nth-of-type(8):checked ~ .carousel__slide:nth-of-type(8) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(8):checked ~ .carousel__controls:nth-of-type(8) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(8):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(8) {
  opacity: 1;
}

.carousel__activator:nth-of-type(9):checked ~ .carousel__track {
  -webkit-transform: translateX(-800%);
          transform: translateX(-800%);
}
.carousel__activator:nth-of-type(9):checked ~ .carousel__slide:nth-of-type(9) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(9):checked ~ .carousel__controls:nth-of-type(9) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(9):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(9) {
  opacity: 1;
}

.carousel__activator:nth-of-type(10):checked ~ .carousel__track {
  -webkit-transform: translateX(-900%);
          transform: translateX(-900%);
}
.carousel__activator:nth-of-type(10):checked ~ .carousel__slide:nth-of-type(10) {
  transition: opacity 0.5s, -webkit-transform 0.5s;
  transition: opacity 0.5s, transform 0.5s;
  transition: opacity 0.5s, transform 0.5s, -webkit-transform 0.5s;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
  -webkit-transform: scale(1);
          transform: scale(1);
}
.carousel__activator:nth-of-type(10):checked ~ .carousel__controls:nth-of-type(10) {
  display: block;
  opacity: 1;
}
.carousel__activator:nth-of-type(10):checked ~ .carousel__indicators .carousel__indicator:nth-of-type(10) {
  opacity: 1;
}


.carousel__control {
  height: 30px;
  width: 30px;
  margin-top: -15px;
  top: 50%;
  position: absolute;
  display: block;
  cursor: pointer;
  border-width: 5px 5px 0 0;
  border-style: solid;
  border-color: #fafafa;
  opacity: 0.35;
  opacity: 1;
  outline: 0;
  z-index: 3;
}
.carousel__control:hover {
  opacity: 1;
}
.carousel__control--backward {
  left: 20px;
  -webkit-transform: rotate(-135deg);
          transform: rotate(-135deg);
}
.carousel__control--forward {
  right: 20px;
  -webkit-transform: rotate(45deg);
          transform: rotate(45deg);
}
.carousel__indicators {
  position: absolute;
  bottom: 20px;
  width: 100%;
  text-align: center;
}
.carousel__indicator {
  height: 15px;
  width: 15px;
  border-radius: 100%;
  display: inline-block;
  z-index: 2;
  cursor: pointer;
  opacity: 0.35;
  margin: 0 2.5px 0 2.5px;
}
.carousel__indicator:hover {
  opacity: 0.75;
}
.carousel__track {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  padding: 0;
  margin: 0;
  transition: -webkit-transform 0.5s ease 0s;
  transition: transform 0.5s ease 0s;
  transition: transform 0.5s ease 0s, -webkit-transform 0.5s ease 0s;
}
.carousel__track .carousel__slide {
  display: block;
  top: 0;
  left: 0;
  right: 0;
  opacity: 1;
}

.carousel__track .carousel__slide:nth-of-type(1) {
  -webkit-transform: translateX(000%);
          transform: translateX(000%);
}

.carousel__track .carousel__slide:nth-of-type(2) {
  -webkit-transform: translateX(100%);
          transform: translateX(100%);
}

.carousel__track .carousel__slide:nth-of-type(3) {
  -webkit-transform: translateX(200%);
          transform: translateX(200%);
}

.carousel__track .carousel__slide:nth-of-type(4) {
  -webkit-transform: translateX(300%);
          transform: translateX(300%);
}

.carousel__track .carousel__slide:nth-of-type(5) {
  -webkit-transform: translateX(400%);
          transform: translateX(400%);
}

.carousel__track .carousel__slide:nth-of-type(6) {
  -webkit-transform: translateX(500%);
          transform: translateX(500%);
}

.carousel__track .carousel__slide:nth-of-type(7) {
  -webkit-transform: translateX(600%);
          transform: translateX(600%);
}

.carousel__track .carousel__slide:nth-of-type(8) {
  -webkit-transform: translateX(700%);
          transform: translateX(700%);
}

.carousel__track .carousel__slide:nth-of-type(9) {
  -webkit-transform: translateX(800%);
          transform: translateX(800%);
}

.carousel__track .carousel__slide:nth-of-type(10) {
  -webkit-transform: translateX(900%);
          transform: translateX(900%);
}


.carousel--scale .carousel__slide {
  -webkit-transform: scale(0);
          transform: scale(0);
}
.carousel__slide {
  height: 100%;
  position: absolute;
  opacity: 0;
  overflow: hidden;
}
.carousel__slide .overlay {height: 100%;}
.carousel--thumb .carousel__indicator {
  height: 30px;
  width: 30px;
}
.carousel__indicator {
  background-color: #fafafa;
}

.carousel__slide:nth-of-type(1),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(1) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(2),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(2) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(3),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(3) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(4),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(4) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(5),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(5) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(6),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(6) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(7),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(7) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(8),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(8) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(9),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(9) {
  background-size: cover;
  background-position: center;
}

.carousel__slide:nth-of-type(10),
.carousel--thumb .carousel__indicators .carousel__indicator:nth-of-type(10) {
  background-size: cover;
  background-position: center;
}

</style>

<script>
  function isVisible(el) {
        while (el) {
            if (el === document) {
                return true;
            }

            var $style = window.getComputedStyle(el, null);

            if (!el) {
                return false;
            } else if (!$style) {
                return false;
            } else if ($style.display === 'none') {
                return false;
            } else if ($style.visibility === 'hidden') {
                return false;
            } else if (+$style.opacity === 0) {
                return false;
            } else if (($style.display === 'block' || $style.display === 'inline-block') &&
                $style.height === '0px' && $style.overflow === 'hidden') {
                return false;
            } else {
                return $style.position === 'fixed' || isVisible(el.parentNode);
            }
        }
  }
  
  setInterval(function(){
    var j=0;
    var elements = document.querySelectorAll('#carousel0 .carousel__control--forward');
    for(i=(elements.length - 1);i>-1;i--) {
      if(isVisible(elements[i])) j=i;
    }
    elements[j].click();
  },15000);
  
</script>


        </div>
        <div class="post-metadata">
            <p class="discography-album_release-date">
    date: 21 September 2025
</p>


<p class="discography-album_type">
    post type: blog
</p>
















        </div>
    </div>
</div>

          <script>
    window.addEventListener("load", () => {
        document.getElementsByClassName("copyrights")[0].innerHTML =
            `Copyrights &copy; ${new Date().getFullYear()} erik fredericks | template c/o <a href='https://github.com/ItsPatrq/minimal-music-project' target='_blank'>minimal-music-project</a>`;
    });
</script>
<footer>
    <p class="copyrights">
    </p>
</footer>
      </main>
      
    <script>
      (function () {
    window.toggleExpander = function toggleExpander(x) {
        const menu = document.getElementsByClassName("menu")[0];
        const navigation = document.getElementsByClassName("navigation")[0];
        if (menu.classList.contains('expanded--visible')) {
            menu.classList.toggle('expanded--visible');
            navigation.addEventListener('transitionend', function(e) {
                menu.classList.toggle("expanded");
              }, {
                capture: false,
                once: true,
                passive: false
              });
        } else {
            menu.classList.toggle("expanded");
            setTimeout(() => menu.classList.toggle('expanded--visible'), 20);
        }
    };
    window.addEventListener("load", () => {
        // #region click to enlarge images 
        const imageWrappers = document.querySelectorAll(".click-to-enlarge");
        imageWrappers.forEach(imageWrapper => {
            
            imageWrapper.addEventListener("click", () => {
                const img = imageWrapper.getElementsByTagName("img")[0];
                const src = img.attributes.getNamedItem("src");
                const modal = document.createElement("div");
                const removeModal = function() {
                    modal.classList.add("hidden");
                    setTimeout(() => {
                        document.body.removeChild(modal);
                    }, 200);
                };
                const newImage = document.createElement("img");
                newImage.classList.add("modal__picture-zoomed--image");
                newImage.setAttribute("src", src.value);
                modal.classList.add("modal__picture-zoomed", "hidden");
                // modal.style.backgroundImage = `URL("${src.value}")`;
                modal.addEventListener("click", removeModal);
                modal.append(newImage);
                document.body.append(modal);
                document.body.addEventListener("keyup", e => {
                    if (e.key === 'Escape') {
                        removeModal();
                    }
                }, {once : true});
                setTimeout(() => {
                    modal.classList.remove("hidden");
                }, 0);
            });
            
        });
        // #endregion click to enlarge images 
        // #region embedded audio players
        const players = document.querySelectorAll("iframe.embedded-player");
        const getParamsByPlayerType = (src, type) => {
            const rt = (src, height) => ({
                src: src,
                height: height
            });
            switch (type.toLocaleLowerCase()) {
                case "soundcloud":
                    return rt(`https://w.soundcloud.com/player/?url=${src}`, 125);
                case "bandcamp":
                    return rt(`https://bandcamp.com/EmbeddedPlayer/${src}`, 125);
                case "spotify":
                    return rt(`https://open.spotify.com/embed/track/${src}`, 80);
                case "spotifyalbum":
                    return rt(`https://open.spotify.com/embed/album/${src}`, 80);
                case "spotifyplaylist":
                    return rt(`https://open.spotify.com/embed/playlist/${src}`, 80);
                case "spotifyepisode":
                    return rt(`https://open.spotify.com/embed/episode/${src}`, 152);
                case "spotifyshow":
                    return rt(`https://open.spotify.com/embed/show/${src}`, 152);
                case "youtube":
                    return rt(`https://www.youtube.com/embed/${src}`, 350);
                case "anchor.fm":
                    return rt(`https://anchor.fm/sucias/embed/episodes/${src}`,102);
                default:
                    return rt(src, 125);
            }
        };
        players.forEach(player => {
            const givenSrc = player.getAttribute("givenSrc");
            const type = player.getAttribute("type");
            const { src, height } = getParamsByPlayerType(givenSrc, type);
            player.setAttribute("src", src);
            player.setAttribute("height", height);
            player.classList.remove("hidden");
        });
        // #endregion embedded audio players
    });
})();
    </script>
    


  </body>
</html>